{% extends "templates/sink.njk" %}

{# Redeclaring import to NOT include context so I can test the context-based override of the copy button at the bottom of the page #}
{% import 'components/esds-doc.njk' as no_context_library %}

{# macros can only access global variables set outside of a {% block %}, a current bug in Nunjucks: https://github.com/mozilla/nunjucks/issues/912 #}
{# this would be done in the base.template before importing the library #}
{% set esds_doc_code_snippet_copy_button_markup %}
    <style>
        .my-custom-button-class {
            background: limegreen;
            border: solid 5px blue;
            font-family: cursive;
            font-size: 16px;
        }
    </style>
    <button class="my-custom-button-class">Copy This Code Now!</button>
{% endset %}
{% import 'components/esds-doc.njk' as library_with_context with context %} {# this version of the library will have access to global variables set outside of {% block %} statements #}

{% block body %}
    <style>
        body {
            padding: 20px;
        }
    </style>
    {% set table_example_code %}
        <table><thead><tr><th>Header</th><th>Header</th><th>Header</th><th>Header</th></tr></thead><tbody><tr><td>Cell Content</td><td>Cell Content</td><td>Cell Content</td><td>Cell Content</td></tr><tr><td>Cell Content</td><td>Cell Content</td><td>Cell Content</td><td>Cell Content</td></tr><tr><td>Cell Content</td><td>Cell Content</td><td>Cell Content</td><td>Cell Content</td></tr><tr><td>Cell Content</td><td>Cell Content</td><td>Cell Content</td><td>Cell Content</td></tr><tr><td>Cell Content</td><td>Cell Content</td><td>Cell Content</td><td>Cell Content</td></tr></tbody></table>
    {% endset %}

    <h1 class="esds-doc-sink-page-header">Basic code snippet</h1>
    {{ no_context_library.code_snippet(source="<h1>Hello World</h1>") }}

    <h1 class="esds-doc-sink-page-header">Complex source</h1>
    {{ no_context_library.code_snippet(source=table_example_code) }}

    <h1 class="esds-doc-sink-page-header">Include filename, use css highlighting</h1>
    {{ no_context_library.code_snippet(filename="myfile.css", 
                            language="css", 
                            source="body { background: hotpink; color: red; font-family: sans-serif; font-weight: bold; }") }}

    <h1 class="esds-doc-sink-page-header">Pass nunjucks macro as source</h1>
    {{ no_context_library.code_snippet(source=no_context_library.button(text="Call To Action!")) }}

    <h1 class="esds-doc-sink-page-header">Hide copy button</h1>
    {{ no_context_library.code_snippet(show_copy_button=false, 
                            source="<h1>Hello World</h1>") }}

    <h1 class="esds-doc-sink-page-header">Default Max Height</h1>
    {{ no_context_library.code_snippet(source=table_example_code) }}

    <h1 class="esds-doc-sink-page-header">Tall Max Height</h1>
    {{ no_context_library.code_snippet(class="esds-doc-code-snippet--tall", 
                            source=table_example_code) }}

    <h1 class="esds-doc-sink-page-header">No Max Height</h1>
    {{ no_context_library.code_snippet(class="esds-doc-code-snippet--no-max-height", 
                            source=table_example_code) }}

    <h1 class="esds-doc-sink-page-header">Override Button Markup with custom code (Alternate button markup is passed indirectly via the global variable context)</h1>
    {{ library_with_context.code_snippet(source="<h1>Hello World</h1>") }}

    <script>
        // Probably should have some kind of "on ready" function here
        Esds.CodeSnippet.init();
    </script>
{% endblock %}
